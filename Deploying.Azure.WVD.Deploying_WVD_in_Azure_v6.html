<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>WVD Deployment Guide v6 | NetApp Cloud Docs</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="WVD Deployment Guide v6 | NetApp Cloud Docs" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/virtual-desktop-service/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6.html" />
	<meta property="og:description" content="Step-by-step guide to deploy VDS v6 into Azure" />
  <meta property="og:image" content="https://docs.netapp.com/virtual-desktop-service/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="Step-by-step guide to deploy VDS v6 into Azure">
  <meta name="keywords" content=" ">
  
  

  <!-- Icons -->
  <link rel="icon" href="/virtual-desktop-service/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  
  <link rel="alternate" type="application/rss+xml" title="NetApp Cloud Docs" href="/virtual-desktop-service/feed.xml">
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/virtual-desktop-service/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/virtual-desktop-service/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/virtual-desktop-service/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/virtual-desktop-service/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/virtual-desktop-service/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/virtual-desktop-service/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/virtual-desktop-service/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/virtual-desktop-service/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/virtual-desktop-service/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/virtual-desktop-service/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/virtual-desktop-service/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/virtual-desktop-service/css/na-pagenav.css' type='text/css'>

  

  
  <link rel='stylesheet' href='/virtual-desktop-service/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/virtual-desktop-service/js/na-search.js'></script>
  

  
  <script src='/virtual-desktop-service/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/virtual-desktop-service/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/virtual-desktop-service/css/prism-netapp.css' type='text/css'>


  <script src='/virtual-desktop-service/js/na-utility.js'></script>
  <script src='/virtual-desktop-service/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/virtual-desktop-service/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/virtual-desktop-service/js/toc.js'></script>
  <script src='/virtual-desktop-service/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>

  <!-- Controls the i18n Browser Redirection -->
  <script>
    
    var siteLocales = [];
    
      siteLocales.push("us-en");
    

    standardizeUrl(siteLocales, "clouddocs.netapp.com", "https://docs.netapp.com");
    
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/virtual-desktop-service/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/virtual-desktop-service/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/virtual-desktop-service/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" data-type="widget" data-placeholder="Search Documentation" data-no-results-found="No results were found for {query}" data-did-you-mean="Search for {suggestion}." data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" data-results-found="{hitCount} results found"  ></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar"><!-- Start Language Selector -->
    <div id="ie-i18n" class="n-property-bar__lang-selector">
      <div id="ie-i18n-menu">
      <span class="ie-i18n-lang">English</span>
        <button class="ie-i18n-icon-container" type="button">
          <svg class="n-globe__icon" aria-labelledby="title">
            <title>globe</title>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#globe"></use>
          </svg>
        </button>
      </div>

      <div id="n-property-navigation-bar__menu--language-selector" class="ie-i18n-results-container n-menu n-menu--v3 n-menu--is-active" style="display: none;">
        <div class="n-language-selector-menu">
          <div class="n-language-selector-menu__header">
            <span class="n-language-selector-menu__title">Select Your Language</span>
          </div>
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list">
                
                
                
                
                <li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="/virtual-desktop-service/us-en/" class="n-menu__header-text"><span translate="no" class="notranslate">English</span></a>
                </li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
              </ul>
            </li>
          </ul>
          <div class="menu__footer">
            <p>Current Language: English
            </p>
          </div>
        </div>
      </div>
    </div>
    <!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com/us-en/cloud/">Cloud Docs</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/virtual-desktop-service/">Virtual&nbsp;Desktop&nbsp;Service</a>
        </li>
        <li class="n-breadcrumb__list-item">
          WVD Deployment Guide v6
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">PDFs<span>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">Site</span>
    </div>
    <li>
      <a target="_blank" href="/virtual-desktop-service/pdfs/fullsite-sidebar/Virtual_Desktop_Service_Documentation.pdf" >
        <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
        Virtual Desktop Service Documentation
      </a>
    </li>
  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Deploying_with_VDS.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Deploying with VDS
          </a>
        </li>
        <span>
          
  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Azure.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Azure
          </a>
        </li>
        <span>
          
  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Windows_Virtual_Desktop.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Windows Virtual Desktop
          </a>
        </li>
        <span>
          
  


  


  


  




          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Google.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Google
          </a>
        </li>
        <span>
          
  


  




          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Architectural.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Architectural
          </a>
        </li>
        <span>
          
  


  


  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Management.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Management
          </a>
        </li>
        <span>
          
  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Deployments.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Deployments
          </a>
        </li>
        <span>
          
  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Applications.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Applications
          </a>
        </li>
        <span>
          
  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Scripted_Events.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Scripted Events
          </a>
        </li>
        <span>
          
  




          
        </span>
      </span>
    

  


  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/User_Administration.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            User Administration
          </a>
        </li>
        <span>
          
  


  


  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/System_Administration.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            System Administration
          </a>
        </li>
        <span>
          
  


  


  


  


  


  


  


  




          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Troubleshooting.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Troubleshooting
          </a>
        </li>
        <span>
          
  


  


  


  


  


  


  


  


  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Reference.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Reference
          </a>
        </li>
        <span>
          
  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Release_notes.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Release notes
          </a>
        </li>
        <span>
          
  


  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Previous_versions.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Previous versions
          </a>
        </li>
        <span>
          
  


  


  


  




          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  


  


  


  

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/Script_Library_Documentation.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            Script Library Documentation
          </a>
        </li>
        <span>
          
  


  


  


  


  


  


  


  


  


  


  




          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  


  

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/virtual-desktop-service/pdfs/sidebar/NetApp_VDS_v____videos.pdf" >
            <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>
            NetApp VDS v5.4 videos
          </a>
        </li>
        <span>
          
  


  


  


  


  


  


  




          
        </span>
      </span>
    

  


</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="index.html">
        Virtual Desktop Service documentation
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Deploying with VDS</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Azure</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Windows Virtual Desktop</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Deploying.Azure.WVD.Deploying_WVD_in_Azure.html">
        Deploying WVD in Azure
      </a></li><li class=" "><a class="na-navbar-padding" href="Deploying.Azure.WVD.Supplemental_WVD_with_existing_AD.html">
        Supplemental - WVD with Existing AD
      </a></li><li class=" "><a class="na-navbar-padding" href="Deploying.Azure.WVD.vds_v5.4_components_and_permissions.html">
        VDS v5.4 Components and Permissions (WVD)
      </a></li><li class=" "><a class="na-navbar-padding" href="Deploying.Azure.WVD.vds_v5.4_prerequisites.html">
        VDS v5.4 Prerequisites (WVD)
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Google</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Deploying.GCP.RDS.deploying_rds_in_gcp.html">
        Deploying RDS in Google
      </a></li><li class=" "><a class="na-navbar-padding" href="Deploying.GCP.vds_v5.4_prerequisites.html">
        VDS v5.4 Prerequisites (RDS/GCP)
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Architectural</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Architectural.change_data_layer.html">
        Change Data Layer
      </a></li><li class=" "><a class="na-navbar-padding" href="Architectual.migrate_data_into_vds.html">
        Migrate Data into VDS
      </a></li><li class=" "><a class="na-navbar-padding" href="Architectual.upgrade_wvd_v1_to_v2.html">
        Upgrade WVD v1 to v2
      </a></li><li class=" "><a class="na-navbar-padding" href="Architectural.Wildcard_SSL_certificate_renewal_process.html">
        Renew SSL Certificate
      </a></li><li class=" "><a class="na-navbar-padding" href="Architectural.wvd_teardown_guide.html">
        VDS Teardown Guide
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Management</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Deployments</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Management.Deployments.provisioning_collections.html">
        Provisioning Collections
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.Deployments.logical_hierarchy_overview.html">
        VDS Logical Hierarchy Overview
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Applications</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Management.Applications.application_entitlement_workflow.html">
        App Entitlement for RDS
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.Applications.wvd_application_entitlement_workflow.html">
        App Entitlement for WVD
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Scripted Events</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Management.Scripted_Events.scripted_events.html">
        Scriped Events
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="Management.Cost_Optimization.workload_schedule.html">
        Configure Cost Optimization
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> User Administration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Management.User_Administration.manage_user_accounts.html">
        Manage User Accounts
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.User_Administration.manage_folders_and_permissions.html">
        Manage Folders and Permissions
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.Applications.application_entitlement_workflow.html">
        Manage Application Access
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.User_Administration.reset_user_password.html">
        Reset User Passwords
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.User_Administration.multi-factor_authentication.html">
        Configure MFA
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> System Administration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.create_domain_admin_account.html">
        Create Domain Admin Account
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.provide_3rd_party_access.html">
        Provide 3rd Party Access
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.configure_backup.html">
        Configure Backup
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.clone_virtual_machines.html">
        Clone Virtual Machines
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.auto_add_disk_space.html">
        Auto Add Disk Space
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.azure_key_vault.html">
        Azure Key Vault
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.configure_antivirus.html">
        Configure Antivirus
      </a></li><li class=" "><a class="na-navbar-padding" href="Management.System_Administration.adding_moving_mapped_drives.html">
        Adding and Moving Mapped Drives
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshooting</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Troubleshooting.reviewing_vds_logs.html">
        Reviewing VDS logs
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.internet_connection_quality.html">
        Internet Connection Quality
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.enable_user_wallpaper.html">
        Enable User Wallpaper
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.printing_issues.html">
        Printing Issues
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.azure_vcpu_core_quota.html">
        Azure vCPU Core Quota
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.unlocking_user_accounts.html">
        Unlock User Account
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.general_vm_performance.html">
        General VM Performance
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.dns_forwarding_for_azure_aadds_sso.html">
        DNS Forwarding for Azure ADDS & SSO
      </a></li><li class=" "><a class="na-navbar-padding" href="Troubleshooting.application_issues.html">
        Application Issues
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Reference</div>
      </a>
      <ul><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Release notes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Reference.Release_Notes.vds_v5.4_release_notes.html">
        VDS v5.4 release notes
      </a></li><li class=" "><a class="na-navbar-padding" href="Reference.Release_Notes.vds_windows_client_release_notes.html">
        VDS Windows client release notes
      </a></li><li class="subfolders "><a href="Reference.Release_Notes.cws_v5.0_release_notes.html">
        <div class="na-navbar-padding"> Previous versions</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="Reference.Release_Notes.vds_v5.3_release_notes.html">
        VDS v5.3 release notes
      </a></li><li class=" "><a class="na-navbar-padding" href="Reference.Release_Notes.cwms_v5.2_release_notes.html">
        CWMS v5.2 release notes
      </a></li><li class=" "><a class="na-navbar-padding" href="Reference.Release_Notes.cws_v5.1_release_notes.html">
        CWS v5.1 release notes
      </a></li><li class=" "><a class="na-navbar-padding" href="#">
        CWS v5.0 release notes
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="Reference.end_user_access.html">
        End user access
      </a></li><li class=" "><a class="na-navbar-padding" href="Reference.vds_change_environments.html">
        VDS change environments
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Script Library Documentation</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="scriptlibrary.AdobeReader.html">
        Adobe Reader DC
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.AMDRadeonInstinctDrivers.html">
        AMD Radeon Instinct Drivers
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.EzeepPrintApp.html">
        Ezeep Print App
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.GoogleChrome.html">
        Google Chrome
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.MicrosoftEdgeChromium.html">
        Microsoft Edge Chromium
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.MicrosoftOffice365.html">
        Microsoft Office 365
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.MicrosoftOneDrive.html">
        Microsoft One Drive
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.MicrosoftTeams.html">
        Microsoft Teams
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.MicrosoftTeamsWVD.html">
        Microsoft Teams for WVD
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.NvidiaCudaDrivers.html">
        Nvidia Cuda Drivers
      </a></li><li class=" "><a class="na-navbar-padding" href="scriptlibrary.NvidiaGridDrivers.html">
        Nvidia Grid Drivers
      </a></li></ul></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> NetApp VDS v5.4 videos</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="video_content_netapptv.html">
        NetApp TV content
      </a></li><li class=" "><a class="na-navbar-padding" href="video_azure_WVDRDS_deploy_54.html">
        Deploy WVD or RDS
      </a></li><li class=" "><a class="na-navbar-padding" href="video_azure_WVD_hostpool_54.html">
        Add WVD host pool in Azure
      </a></li><li class=" "><a class="na-navbar-padding" href="video_azure_WVD_users_appgroups_54.html">
        Manage WVD users and app groups
      </a></li><li class=" "><a class="na-navbar-padding" href="video_azure_WVDRDS_optimize_resources_54.html">
        Managing resources and minimizing costs
      </a></li><li class=" "><a class="na-navbar-padding" href="video_VDS_day_in_the_life.html">
        Automate application management for WVD and RDS
      </a></li><li class=" "><a class="na-navbar-padding" href="Architectual.upgrade_wvd_v1_to_v2.html">
        Upgrade v1 WVD host pool to v2
      </a></li></ul></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      



<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">WVD Deployment Guide v6</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2020-12-02 17:40:31 +0000">12/02/2020</time>
    
  

<span>Contributors
  <a target="_blank" href="https://github.com/tvanroo">
    <img  class="avatar avatar-small"
          alt="tvanroo"
          width="20" height="20"
          src="https://avatars2.githubusercontent.com/u/29737083?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>


  <span>
    <a target="_blank" href="/virtual-desktop-service/pdfs/pages/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6.pdf" role="button">
      <img src="/virtual-desktop-service/images/pdf.png" width="20" height="20"/>Download PDF of this page</a>
  </span>


</p>


<div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide will provide the step by step instructions to create a Windows Virtual Desktop (WVD) deployment utilizing NetApp Virtual Desktop Service (VDS) in Azure.</p>
</div>
<div class="paragraph">
<p>The guide starts at: <a href="https://manage.vds.netapp.com/" class="bare">https://manage.vds.netapp.com/</a></p>
</div>
<div class="paragraph">
<p>This Proof of Concept (POC) guide is designed to help you quickly deploy and configure WVD in your own test Azure Subscription. This guide assumes a green-field deployment into a clean, non-production Azure Active Directory tenant.</p>
</div>
<div class="paragraph">
<p>Production deployments, especially into existing AD or Azure AD environments are very common however that process is not considered in this POC Guide. Complex POCs and production deployments should be initiated with the NetApp VDS Sales/Services teams and not performed in a self-service fashion.</p>
</div>
<div class="paragraph">
<p>This POC document will take you thru the entire WVD deployment and provide a brief tour of the major areas of post-deployment configuration available in the VDS platform. Once completed you’ll have a fully deployed and functional WVD environment, complete with host pools, app groups and users. Optionally you’ll have the option to configure automated application delivery, security groups, file share permissions, Azure Cloud Backup, intelligent cost optimization. VDS deploys a set of best practice settings via GPO. Instructions on how to optionally disable those controls are also included, in the event your POC needs to have no security controls, similar to an unmanaged local device environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="wvd-basics">WVD basics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Windows Virtual Desktop is a comprehensive desktop and app virtualization service that runs in the cloud. Here is a quick list of some of the key features and functionality:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Platform services including gateways, brokering, licensing, and login and included as a service from Microsoft. This minimized infrastructure requiring hosting and management.</p>
</li>
<li>
<p>Azure Active Directory can be leveraged as the identity provider, allowing for the layering of additional Azure security services such as conditional access.</p>
</li>
<li>
<p>Users experience single sign-on experience for Microsoft services.</p>
</li>
<li>
<p>User sessions connect to the session host via a proprietary reverse-connect technology. This means that no inbound ports need to be open, instead an agent creates and outbound connection to the WVD management plane which in turn connects to the end user device.</p>
</li>
<li>
<p>Reverse connect even allows virtual machines to run without being exposed to the public internet enabling isolated workloads even while maintaining remote connectivity.</p>
</li>
<li>
<p>WVD includes access to Windows 10 Multi Session, allowing a Windows 10 Enterprise experience with the efficiency of high density user sessions.</p>
</li>
<li>
<p>FSLogix profile containerization technology is including, enhancing user session performance, storage efficiency and enhancing the Office experience in non-persistent environments.</p>
</li>
<li>
<p>WVD supports full desktop and RemoteApp access. Both persistent or non-persistent, and both dedicated and multi-session experiences.</p>
</li>
<li>
<p>Organizations can save on Windows licensing because WVD can leverage "Windows 10 Enterprise E3 Per User" which replaces the need for RDS CALs and significantly reduces the per-hour cost of session host VMs in Azure.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="guide-scope">Guide scope</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide walks you through the deployment of WVD using NetApp VDS technology from the perspective of an Azure and VDS administrator. You bring the Azure tenant and subscription with zero pre-configuration and this guide helps you setup WVD end-to-end.</p>
</div>
<div class="olist arabic">
<div class="title">This guide covers the following steps:</div>
<ol class="arabic">
<li>
<p><a href="#Azure Prerequisites">Confirm prerequisites of the Azure tenant, Azure subscription and Azure admin account permissions</a></p>
</li>
<li>
<p><a href="#Collect Discovery Details">Collect required discovery details</a></p>
</li>
<li>
<p><a href="#VDS Setup Sections">Build the Azure environment using the purpose-built VDS for Azure Setup wizard</a></p>
</li>
<li>
<p><a href="#Create WVD Host Pool">Create the first host pool with a standard Windows 10 EVD image</a></p>
</li>
<li>
<p><a href="#Enable VDS desktops to users">Assigning virtual desktops to Azure AD user(s)</a></p>
</li>
<li>
<p><a href="#default-app-group">Add users to the default app group for delivering the desktop environment to users.</a> Optionally, <a href="#Create Additional WVD App Group(s)">create additional host pool(s) for delivering RemoteApp services</a></p>
</li>
<li>
<p><a href="#End User WVD Access">Connect as an end user via client software and/or web client</a></p>
</li>
<li>
<p><a href="#admin-connection-options">Connect to the platform and client services as local and domain admin</a></p>
</li>
<li>
<p><a href="#Multi-Factor Authentication (MFA)">Optionally enable VDS' multi-factor authentication for VDS admins &amp; WVD end users</a></p>
</li>
<li>
<p><a href="#Application Entitlement Workflow">Optionally walk through the entire application entitlement workflow including populating the app library, app install automation, app masking by users and security groups</a></p>
</li>
<li>
<p><a href="#Azure AD Security Groups">Optionally create and manage Active Directory security groups, folder permissions and application entitlement by group.</a></p>
</li>
<li>
<p><a href="#Configure Cost Optimization Options">Optionally configure cost optimization technologies including Workload Scheduling and Live Scaling</a></p>
</li>
<li>
<p><a href="#Create and Manage VM Images">Optionally create, update and Sysprep a virtual machine image for future deployments</a></p>
</li>
<li>
<p><a href="#Configure Azure Cloud Backup Service">Optionally configure Azure Cloud Backup</a></p>
</li>
<li>
<p><a href="#Select App Management/Policy Mode">Optionally disable default security control group policies</a></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="azure-prerequisites">Azure prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>VDS uses native Azure security context to deploy the WVD instance. Before starting the VDS Setup wizard, there are a few Azure prerequisites that need to be established.</p>
</div>
<div class="paragraph">
<p>During the deployment, service accounts and permissions are granted to VDS via authentication of an existing admin account from within the Azure tenant.</p>
</div>
<div class="sect2">
<h3 id="quick-prerequisites-checklist">Quick prerequisites checklist</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> Azure Tenant with Azure AD instance (can be Microsoft 365 instance)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Azure Subscription</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Available Azure Quota for Azure virtual machines</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Azure Admin Account with Global Admin and Subscription Ownership Roles</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Detailed prerequisites are documented on <a href="docs_components_and_permissions.html">this PDF</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="azure-administrator-in-azure-ad">Azure administrator in Azure AD</h3>
<div class="paragraph">
<p>This existing Azure admin must be an Azure AD account in the target tenant. Windows Server AD accounts can be deployed with the VDS Setup but additional steps are required to setup a sync with Azure AD (out of scope for this guide)</p>
</div>
<div class="paragraph">
<p>This can be confirmed by finding the user account in the Azure Management Portal under Users &gt; All Users.<br>
<span class="image"><img src="./media/Azure%20Admin%20in%20Azure%20AD.png" alt="Azure Admin in Azure AD"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="global-administrator-role">Global administrator role</h3>
<div class="paragraph">
<p>The Azure Administrator must be assigned the Global administrator role in the Azure tenant.</p>
</div>
<div class="olist arabic">
<div class="title">To check your role in Azure AD, follow these steps:</div>
<ol class="arabic">
<li>
<p>Log in to the Azure Portal at <a href="https://portal.azure.com/" class="bare">https://portal.azure.com/</a></p>
</li>
<li>
<p>Search for and select Azure Active Directory</p>
</li>
<li>
<p>In the next pane to the right, click on the Users option in the Manage section</p>
</li>
<li>
<p>Click on the name of the Administrator user that you are checking</p>
</li>
<li>
<p>Click on Directory Role. In the far-right pane the Global administrator role should be listed<br>
<span class="image"><img src="./media/Global%20Administrator%20Role%201.png" alt="Global Administrator Role 1"></span></p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">If this user does not have the Global administrator role, you can perform the following steps to add it (Note that the logged in account must be a Global administrator to perform these steps):</div>
<ol class="arabic">
<li>
<p>From the user Directory Role detail page in step 5 above, click the Add Assignment button at the top of the detail page.</p>
</li>
<li>
<p>Click on Global administrator in the list of roles. Click the Add button.<br>
<span class="image"><img src="./media/Global%20Administrator%20Role%202.png" alt="Global Administrator Role 2"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="azure-subscription-ownership">Azure subscription ownership</h3>
<div class="paragraph">
<p>The Azure Administrator must also be a Subscription Owner on the subscription that will contain the deployment.</p>
</div>
<div class="olist arabic">
<div class="title">To check that the Administrator is a Subscription Owner, follow these steps:</div>
<ol class="arabic">
<li>
<p>Log in to the Azure Portal at <a href="https://portal.azure.com/" class="bare">https://portal.azure.com/</a></p>
</li>
<li>
<p>Search for, and select Subscriptions</p>
</li>
<li>
<p>In the next pane to the right, click on the name of the subscription to see the subscription details</p>
</li>
<li>
<p>Click on the Access Control (IAM) menu item in the pane second from the left</p>
</li>
<li>
<p>Click on the Role Assignments tab. The Azure Administrator should be listed in the Owner section.<br>
<span class="image"><img src="./media/Azure%20Subscription%20Ownership%201.png" alt="Azure Subscription Ownership 1"></span></p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">If the Azure Administrator is not listed, you can add the account as a subscription owner by following these steps:</div>
<ol class="arabic">
<li>
<p>Click the Add button at the top of the page and choose the Add Role Assignment option</p>
</li>
<li>
<p>A dialog will appear to the right. Choose “Owner” in the role drop down, then start typing the username of the Administrator in the Select box. When the full name of the Administrator appears, select it</p>
</li>
<li>
<p>Click the Save button at the bottom of the dialog<br>
<span class="image"><img src="./media/Azure%20Subscription%20Ownership%202.png" alt="Azure Subscription Ownership 2"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="azure-compute-core-quota">Azure compute core quota</h3>
<div class="paragraph">
<p>The CWA Setup wizard and VDS portal will create new virtual machines and the Azure subscription must have available quota to successfully execute.</p>
</div>
<div class="olist arabic">
<div class="title">To check quota follow these steps:</div>
<ol class="arabic">
<li>
<p>Navigate to the Subscriptions module and click “Usage + Quotas”</p>
</li>
<li>
<p>Select all providers in the “providers” drop-down, select “Microsoft.Compute in the “Providers” drop-down</p>
</li>
<li>
<p>Select the target Region in the “Locations” drop-down</p>
</li>
<li>
<p>A list of available quotas by virtual machine family should be shown<br>
<span class="image"><img src="./media/Azure%20Compute%20Core%20Quota.png" alt="Azure Compute Core Quota"></span><br>
If you need to increase quota, click Request Increase and follow the prompts to add additional capacity. For the initial deployment specifically request increased quote for the “Standard DSv3 Family vCPUs”</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="collect-discovery-details">Collect discovery details</h3>
<div class="paragraph">
<p>Once working through the CWA Setup wizard there are several questions that need to be answered. NetApp VDS has provided a linked PDF that can be used to record these selections prior to deployment. Item include:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 95%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Item</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VDS admin credentials</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect the existing VDS admin credentials if you already have them. Otherwise a new admin account will be created during deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure Region</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine the target Azure Region based on performance and availability of services. This <a href="https://azure.microsoft.com/en-us/services/virtual-desktop/assessment/" target="_blank" rel="noopener">Microsoft Tool</a> can estimate end user experienced based on region.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Active Directory type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VMs will need to join a domain but can&#8217;t directly join Azure AD. The VDS deployment can build a new virtual machine or use an existing domain controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">File Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance is highly dependent on disk speed, particularly as related to user profile storage. The VDS setup wizard can deploy a simple file server or configure Azure NetApp Files (ANF). For nearly any production environment ANF is recommended however for a POC the file server option provides sufficient performance. Storage options can be revised post-deployment, including using existing storage resources in Azure. Consult ANF pricing for details: <a href="https://azure.microsoft.com/en-us/pricing/details/netapp/" class="bare">https://azure.microsoft.com/en-us/pricing/details/netapp/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Virtual Network Scope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A routable /20 network range is required for the deployment. the VDS setup wizard will allow you to define this range. It is important that this range does not overlap with any existing vNets in Azure or on-premises (if the two networks will be connected via a VPN or ExpressRoute).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vds-setup-sections">VDS setup sections</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Login to <a href="https://manage.vds.netapp.com/" class="bare">https://manage.vds.netapp.com/</a> with your VDS credentials.</p>
</li>
<li>
<p>Navigate to Deployments &gt; Add Deployment and select Microsoft Azure and Continue</p>
</li>
<li>
<p>Login with the Azure admin account referenced above in the prerequisites.</p>
</li>
<li>
<p>Select the appropriate Azure subscription and click Add Deployment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT-116b5.png" alt="Deploying.Azure.WVD.Deploying WVD in Azure v6 DRAFT 116b5" width="75%"></span></p>
</div>
<div class="sect2">
<h3 id="iaas-and-platform">IaaS and platform</h3>
<div class="paragraph">
<p><span class="image"><img src="./media/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT-6c76b.png" alt="Deploying.Azure.WVD.Deploying WVD in Azure v6 DRAFT 6c76b" width="75%"></span></p>
</div>
<div class="sect3">
<h4 id="azure-ad-domain-name">Azure AD domain name</h4>
<div class="paragraph">
<p>The Azure AD domain name is inherited by the selected tenant.</p>
</div>
</div>
<div class="sect3">
<h4 id="location">Location</h4>
<div class="paragraph">
<p>Select an appropriate <strong>Azure Region</strong>. This <a href="https://azure.microsoft.com/en-us/services/virtual-desktop/assessment/" target="_blank" rel="noopener">Microsoft Tool</a> can estimate end user experienced based on region.</p>
</div>
</div>
<div class="sect3">
<h4 id="network">Network</h4>
<div class="paragraph">
<p>Selecting <em>New Network</em> will allow VDS to build a /20 network in Azure based on input provided later in the wizard.</p>
</div>
<div class="paragraph">
<p>Selecting <em>Existing Network</em> will allow deployment into an existing Azure network and require the Active Directory type (see below) be an Existing Windows Server AD.</p>
</div>
</div>
<div class="sect3">
<h4 id="active-directory-type">Active Directory type</h4>
<div class="paragraph">
<p>VDS can be provisioned with a <strong>new virtual machine</strong> for the Domain Controller function or setup to leverage an existing Domain Controller.</p>
</div>
<div class="paragraph">
<p>Alternatively, VDS can deploy using an existing Active Directory if provided credentials to that domain (e.g. Global Administrator rights)<br>
<span class="image"><img src="./media/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT-e8633.png" alt="Deploying.Azure.WVD.Deploying WVD in Azure v6 DRAFT e8633" width="75%"></span></p>
</div>
<div class="paragraph">
<p>In this guide we will select New Windows Server Active Directory, which will create one or two VMs (based on choices made during this process) under the subscription.</p>
</div>
<div class="paragraph">
<p>A detailed article covering an existing AD deployment is found <a href="Deploying.Azure.WVD.Supplemental_WVD_with_existing_AD.html">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="active-directory-domain-name">Active Directory domain name</h4>
<div class="paragraph">
<p>Enter a <strong>domain name</strong>. Mirroring the Azure AD Domain Name from above is recommended.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the domain entered is also used externally, additional steps need to be completed to allow access to that address from within the VDS environment. (e.g. accessing <a href="https://www.companydomain.com" class="bare">https://www.companydomain.com</a> from within VDS) See this <a href="Troubleshooting.dns_forwarding_for_azure_aadds_sso.html">article for more information</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="file-management-type">File Management type</h4>
<div class="paragraph">
<p>VDS can provision a simple file server virtual machine or setup and configure Azure NetApp Files. In production, Microsoft recommends allocating 30gb per user and we&#8217;ve observed that allocating 5-15 IOPS per user is required for optimal performance.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Azure NetApp Files (ANF) has a 4TiB minimum while managed disks do not have a relevant minimum size. Therefore, the minimum spend on ANF may be cost prohibitive for smaller deployments. As a point of reference, in NetApp&#8217;s own Managed Desktop Service (VDMS) we default to ANF for environments with 50+ users.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In a POC (non-production) environment the file server is a low-cost and simple deployment option. However, the available performance of Azure Managed Disks can be overwhelmed by the IOPS consumption of even a moderately sized production deployment.</p>
</div>
<div class="paragraph">
<p>For example, a 4TB Standard SSD disk in azure supports up to 500 IOPS, which could only support a maximum of 100 total users at 5 IOPS/user. With ANF Premium the same sized storage setup would support 16,000 IOPS posting 32x more IOPS.</p>
</div>
<div class="paragraph">
<p>For production WVD deployments, <strong>Azure NetApp Files is Microsoft&#8217;s recommendation</strong>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Azure NetApp Files needs to be made available to the subscription you wish to deploy into - please contact your NetApp account rep or use this link: <a href="https://aka.ms/azurenetappfiles" class="bare">https://aka.ms/azurenetappfiles</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is also required that you register NetApp as a provider to your subscription. This can be done by doing the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigate to Subscriptions in the Azure portal</p>
<div class="ulist">
<ul>
<li>
<p>Click Resource Providers</p>
</li>
<li>
<p>Filter for NetApp</p>
</li>
<li>
<p>Select the provider and click Register</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="rds-license-number">RDS license number</h4>
<div class="paragraph">
<p>NetApp VDS can be used to deploy RDS and/or WVD environments. When deploying WVD, this field can <strong>remain empty</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="thinprint">Thinprint</h4>
<div class="paragraph">
<p>NetApp VDS can be used to deploy RDS and/or WVD environments. Thinprint is an optional install that is only compatible with RDS deployments. When deploying WVD, this toggle can remain <strong>off</strong> (toggle left).</p>
</div>
</div>
<div class="sect3">
<h4 id="notification-email">Notification email</h4>
<div class="paragraph">
<p>VDS will send deployment notifications and ongoing health reports to the <strong>email provided</strong>. This can be changed later.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vms-and-network">VMs and network</h3>
<div class="paragraph">
<p>There are a variety of services that need to run in order to support a VDS environment – these are collectively referred to as the “VDS platform”.<br>
Depending on the configuration these can include CWMGR, one or two RDS Gateways, one or two HTML5 Gateways, an FTPS server, and one or two Active Directory VMs.</p>
</div>
<div class="paragraph">
<p>Most WVD deployments leverage the Single virtual machine option, as Microsoft manages the WVD Gateways as a PaaS service.</p>
</div>
<div class="paragraph">
<p>For smaller and simpler environments that will include RDS use cases, all of these services can be condensed into the Single virtual machine option to reducing VM costs (with limited scalability). For RDS uses cases with more than 100 users the Multiple virtual machines option is advised in order to facilitate RDS and/or HTML5 Gateway scalability</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT-bb8b3.png" alt="Deploying.Azure.WVD.Deploying WVD in Azure v6 DRAFT bb8b3" width="75%"></span></p>
</div>
<div class="sect3">
<h4 id="platform-vm-configuration">Platform VM configuration</h4>
<div class="paragraph">
<p>NetApp VDS can be used to deploy RDS and/or WVD environments. For RDS deployments you need to deploy and manage additional components such as Brokers and Gateways, in production these services should be run on dedicated and redundant virtual machines. For WVD, all of these services are provided by Azure as an included service and thus, the <strong>single virtual machine</strong> configuration is recommended.</p>
</div>
<div class="sect4">
<h5 id="single-vm">Single VM</h5>
<div class="paragraph">
<p>This is the recommended selection for deployments that will exclusively use WVD (and not RDS or a combination of the two). In a Single virtual machine deployment the following roles are all hosted on a single VM in Azure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CW Manager</p>
</li>
<li>
<p>HTML5 Gateway</p>
</li>
<li>
<p>RDS Gateway</p>
</li>
<li>
<p>Remote App</p>
</li>
<li>
<p>FTPS Server (Optional)</p>
</li>
<li>
<p>Domain Controller role</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The maximum advised user count for RDS use cases in this configuration is 100 users. Load balanced RDS/HTML5 gateways are not an option in this configuration, limiting the redundancy and options for increasing scale in the future. Again, this limit does not apply to WVD deployments, since Microsoft manages the Gateways as a PaaS service.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If this environment is being designed for multi-tenancy, a Single virtual machine configuration is not supported - neither is WVD or AD Connect.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="multiple-vms">Multiple VMs</h5>
<div class="paragraph">
<p>When splitting the VDS Platform into Multiple virtual machines the following roles are hosted on dedicated VMs in Azure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remote Desktop Gateway</p>
<div class="paragraph">
<p>VDS Setup can be used to deploy and configure one or two RDS Gateways. These gateways relay the RDS user session from the open internet to the session host VMs within the deployment. RDS Gateways handle an important function, protecting RDS from direct attacks from the open internet and to encrypt all RDS traffic in/out of the environment. When two Remote Desktop Gateways are selected, VDS Setup deploys 2 VMs and configures them to load balance incoming RDS user sessions.</p>
</div>
</li>
<li>
<p>HTML5 Gateway</p>
<div class="paragraph">
<p>VDS Setup can be used to deploy and configure one or two HTML 5 Gateways. These gateways serve up an HTML 5 VDS  access client (e.g. <a href="https://login.cloudworkspace.com" class="bare">https://login.cloudworkspace.com</a>) based on the RemoteSpark technology. Licensing for this component is typically included in the cost of VDS licensing. When two HTM5 CW Portals are selected, VDS Setup deploys 2 VMs and configures them to load balance incoming HTML5 user sessions.<br>
Note that when using Multiple virtual machine option - even if you are only intend to support RDP connections for your RDS workloads - at least 1 HTML5 gateway is highly recommended to enable Connect to Server functionality from VDS.</p>
</div>
</li>
<li>
<p>Gateway Scalability Notes</p>
<div class="paragraph">
<p>For RDS use cases, the maximum size of the environment can be scaled out with additional Gateway VMs, with each RDS or HTML5 Gateway supporting roughly 500 users. Additional Gateways can be added later with minimal NetApp professional services assistance</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this environment is being designed for multi-tenancy then the Multiple virtual machines selection is required.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="time-zone">Time Zone</h4>
<div class="paragraph">
<p>While the end users' experience will reflect their local time zone, a default time zone needs to be selected. Select the time zone from where the <strong>primary administration</strong> of the environment will be performed.</p>
</div>
</div>
<div class="sect3">
<h4 id="virtual-network-scope">Virtual Network Scope</h4>
<div class="paragraph">
<p>It is a best practice to isolate VMs to different subnets according to their purpose. First, define the network scope and add a /20 range.</p>
</div>
<div class="paragraph">
<p>VDS Setup detects and suggests a range that should prove successful. Per best practices, the subnet IP addresses must fall into a private IP address range.</p>
</div>
<div class="paragraph">
<p>These ranges are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>192.168.0.0 through 192.168.255.255</p>
</li>
<li>
<p>172.16.0.0 through 172.31.255.255</p>
</li>
<li>
<p>10.0.0.0 through 10.255.255.255</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Review and adjust if needed, then click Validate to identify subnets for each of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Tenant:</em> this is the range that session host servers and database servers will reside in</p>
</li>
<li>
<p><em>Services:</em> this is the range that PaaS services like Azure NetApp Files will reside in</p>
</li>
<li>
<p><em>Platform:</em> this is the range that Platform servers will reside in</p>
</li>
<li>
<p><em>Directory:</em> this is the range that AD servers will reside in</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="review-provision">Review &amp; Provision</h3>
<div class="paragraph">
<p>The final page provides an opportunity to review your choices. When you have completed that review, click the Validate button. VDS Setup will review all the entries and verify that the deployment can proceed with the information provided. This validation can take 2-10 minutes.</p>
</div>
<div class="paragraph">
<p>Once validation is complete the green Provision button will appear in place of the Validate button. Click on Provision to start the provisioning process for your deployment.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT-8dc32.png" alt="Deploying.Azure.WVD.Deploying WVD in Azure v6 DRAFT 8dc32" width="75%"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="task-history">Task History</h3>
<div class="paragraph">
<p>The provisioning process takes between 2-4 hours depending on Azure workload and the choices you made. You can follow the progress in the log by clicking the <em>Task History</em> page or wait for the email that will tell you the deployment process has completed. Deployment builds the virtual machines and Azure components required to support both VDS and a Remote Desktop or a WVD implementation. This includes a single virtual machine that can act as both an Remote Desktop session host and a file server. In a WVD implementation this virtual machine will act only as a file server.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./media/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT-20da2.png" alt="Deploying.Azure.WVD.Deploying WVD in Azure v6 DRAFT 20da2" width="75%"></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-and-configure-ad-connect">Install and configure AD Connect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Immediately after the install is successful, AD Connect needs to be installed and configured on the Domain Controller. In a singe platform VM setup the CWMGR1 machine is the DC. The users in AD need to sync between Azure AD and the local domain.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
AD Connect is a Microsoft supported product that involves managing and replicating user identity and password data. If you plan to use this configuration for production use, make sure you fully understand the configuration choices and security best practices as described by Microsoft. For example,  using a task specific privileged service account for the sync credential provides a better security profile than reusing an account that belongs to an Administrator. Full details can be found at  <a href="https://docs.microsoft.com/en-us/azure/active-directory/hybrid/" class="bare">https://docs.microsoft.com/en-us/azure/active-directory/hybrid/</a>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">To install and configure AD Connect</div>
<ol class="arabic">
<li>
<p>Navigate to the Deplopyment detail page</p>
</li>
<li>
<p>Select <em>Platform Servers</em> from the  <em>More&#8230;&#8203;</em> tab</p>
</li>
<li>
<p>Click <em>Connect</em> from the actions column</p>
</li>
<li>
<p>Connect to the domain controller as a domain admin.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>A domain admin account was automatically created as part of the deployment automation. You can get those credentials from the <a href="Management.System_Administration.azure_key_vault.html">Azure Key Vault</a></p>
</li>
</ol>
</div>
</li>
<li>
<p>Install AD Connect on the DC</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Download installer and run the .MSI from <a href="https://www.microsoft.com/en-us/download/details.aspx?id=47594">here</a></p>
</li>
<li>
<p>Select “Use express settings”. See <a href="https://docs.microsoft.com/en-us/azure/active-directory/hybrid/how-to-connect-install-express">this Microsoft KB</a> for more details.</p>
</li>
<li>
<p>Use the Azure AD Admin user from the initial deployment to authenticate into Azure AD.</p>
</li>
<li>
<p>Enter the Active Directory admin credentials. ("LocalAdminName" from the Azure Key Vault above)</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>The privileges requirements for the local AD admin can be found at <a href="https://docs.microsoft.com/en-us/azure/active-directory/hybrid/reference-connect-accounts-permissions" class="bare">https://docs.microsoft.com/en-us/azure/active-directory/hybrid/reference-connect-accounts-permissions</a>. Enter credentials in the form of domain\account_name (E.g: mytest.onmicrosoft.com\adsyncacct)</p>
</li>
</ol>
</div>
</li>
<li>
<p>On the Azure AD sign-on page, AD-Connect should be able to match the VDS Domain name to the Azure AD domain name automatically because they are the same. in this scenario, check the “Continue without matching all UPN suffixes” option to proceed since you don’t have any custom domain names to match.</p>
</li>
<li>
<p>Domain suffix matching, including the use of custom domain names at the Azure AD level is supported for this step – consult the AD-Connect documentation for implementing advanced options.</p>
</li>
<li>
<p>On the “Ready to Configure” screen. Click Install</p>
</li>
</ol>
</div>
</li>
<li>
<p>All users need to be present in both the local domain created in the Workspace and Azure AD. By default, AD Connect will sync new users in the local domain up to the Azure AD Users list. Its ok if you already have users in Azure AD – giving them the same username will allow AD Connect to sync their identity in both domains.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Back in VDS, navigate to Workspace Details &gt; User &amp; Groups to manage users.</p>
</li>
<li>
<p>If the user already exists in Azure AD, ensure the username portion matches the Azure AD username and not the entire email address. (E.g. “tanya.jones” and not <a href="mailto:tanya.jones@mytest.onmicrosoft.com">tanya.jones@mytest.onmicrosoft.com</a>)</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Users will be synced up to Azure AD and if the user already exists in Azure AD then the user identities will be synced. Password changes from VDS will sync up to Azure AD users, but Azure AD users will not be able to change their password on Azure AD unless  AD-Connect Password Write Back is enabled: (<a href="https://docs.microsoft.com/en-us/azure/active-directory/authentication/tutorial-enable-writeback" class="bare">https://docs.microsoft.com/en-us/azure/active-directory/authentication/tutorial-enable-writeback</a>)
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Log into the Azure portal, navigate to Azure Active Directory &gt; AD Connect to confirm that user sync has occurred. Additional details can be found in the application event logs on the domain contrller VM.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-wvd-host-pool">Create WVD host pool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>End User access to WVD virtual machines is managed by host pools , which contain the virtual machines, and app groups, which in-turn contain the users and type of user access.</p>
</div>
<div class="olist arabic">
<div class="title">To build your first host pool</div>
<ol class="arabic">
<li>
<p>Navidate to Workspace detail page &gt; WVD Tab &gt; Click the Add button in the right hand side of the WVD host pools section header.<br>
<span class="image"><img src="./media/Create%20WVD%20Host%20Pool%201.png" alt="Create WVD Host Pool 1"></span></p>
</li>
<li>
<p>Enter a name and description for your host pool.</p>
</li>
<li>
<p>Choose a host pool type</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Pooled</strong> means multiple users will access the same pool of virtual machines with the same applications installed.</p>
</li>
<li>
<p><strong>Personal</strong> creates a host pool where users are assigned their own session host VM.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Select the Load Balancer type</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>Depth First</strong> will fill the first shared virtual machine to the max number of users before starting on the second virtual machine in the pool</p>
</li>
<li>
<p><strong>Breadth First</strong> will distribute users to all the virtual machines in the pool in a round robin fashion</p>
</li>
</ol>
</div>
</li>
<li>
<p>Select an Azure virtual machines template for creating the virtual machines in this pool. While VDS will show all templates available in the subscription, we recommend selecting the most recent Windows 10 multi-user build for the best experience. The current build is Windows-10-20h1-evd. (Optionally create a Gold Image using the Provisioning Collection functionality to build hosts from a custom virtual machine image)</p>
</li>
<li>
<p>Select the Azure machine size. For evaluation purposes, NetApp recommends the D series (standard machine type for multi-user) or E series (enhanced memory configuration for heavier duty multi-user scenarios). The machine sizes can be changed later in VDS if you want to experiment with different series and sizes</p>
</li>
<li>
<p>Select a compatible storage type for the virtual machines’ Managed Disk instances from the drop down list</p>
</li>
<li>
<p>Select the number of virtual machines you want created as part of the host pool creation process. You can add virtual machines to the pool later, but VDS will build the number of virtual machines you request and add them to the host pool once its created</p>
</li>
<li>
<p>Click the Add host pool button to start the creation process. You can track progress on the WVD page, or you can see the details of the process log on the Deployments/Deployment name page in the Tasks section</p>
</li>
<li>
<p>Once the host pool is created it will appear in the host pool list on the WVD page. Click on the name of the host pool to see its detail page, which includes a list of its virtual machines , app groups, and active users</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
WVD Hosts in VDS are created with a setting that disallows user sessions to connect. This is by design to allow for customization prior to accepting user connections. This setting can be changed by editing the session host’s settings. <span class="image"><img src="./media/Create%20WVD%20Host%20Pool%202.png" alt="Create WVD Host Pool 2"></span>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enable-vds-desktops-for-users">Enable VDS desktops for users</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As noted above, VDS creates all the elements required to support end user workspaces during deployment. Once the deployment has completed, the next step is to enable workspace access for each user you want introduced to the WVD environment. This step creates the profile configuration and end user data layer access that is the default for a virtual desktop. VDS reuses this configuration to link Azure AD end users to the WVD App Pools.</p>
</div>
<div class="olist arabic">
<div class="title">To enable workspaces for end users follow these steps:</div>
<ol class="arabic">
<li>
<p>Log in to VDS at <a href="https://manage.cloudworkspace.com" class="bare">https://manage.cloudworkspace.com</a> using the VDS primary administrator account you created during provisioning. If you don’t remember your account information, please contact NetApp VDS for assistance in retrieving it</p>
</li>
<li>
<p>Click on the Workspaces menu item, then click on the name of the Workspace that was created automatically during provisioning</p>
</li>
<li>
<p>Click on the Users and Groups tab<br>
<span class="image"><img src="./media/Enable%20VDS%20desktops%20to%20Users%201.png" alt="Enable VDS desktops to Users 1"></span></p>
</li>
<li>
<p>For each user that you want to enable, scroll over the username and then click on the Gear icon</p>
</li>
<li>
<p>Choose the “Enable Cloud Workspace” option<br>
<span class="image"><img src="./media/Enable%20VDS%20desktops%20to%20Users%202.png" alt="Enable VDS desktops to Users 2"></span></p>
</li>
<li>
<p>It takes about 30-90 seconds for the enablement process to complete. Note that the user status will change from Pending to Available</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Activating Azure AD Domain Services creates a managed domain in Azure, and each WVD virtual machine that is created will be joined to that domain. In order for traditional login to the virtual machines to work, the password hash for Azure AD users must be synced to support NTLM and Kerberos authentication. The easiest way to accomplish this task is to change the user password in Office.com or the Azure portal, which will force the password hash sync to occur. The sync cycle for Domain Service servers can take up to 20 minutes.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="enable-user-sessions">Enable user sessions</h3>
<div class="paragraph">
<p>By default, session hosts are unable to accept user connections. This setting is commonly called “drain mode” as it can be used in production to prevent new user sessions, allowing the host to eventually remove all user sessions. When new user sessions are allowed on a host this action is commonly referred to as placing the session host “into rotation.”</p>
</div>
<div class="paragraph">
<p>In production it makes sense to start new hosts in drain mode because there are typically configuration tasks that need to be completed before the host is ready for production workloads.</p>
</div>
<div class="paragraph">
<p>In testing and evaluation you can immediately take the hosts out of drain mode to enable user connects and to confirm functionality.<br>
.To Enable user sessions on the session host(s) follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the WVD Section of the workspace page.</p>
</li>
<li>
<p>Click on the host pool name under “WVD host pools”.<br>
<span class="image"><img src="./media/Enable%20User%20Sessions%201.png" alt="Enable User Sessions 1"></span></p>
</li>
<li>
<p>Click on the name of the Session host(s) and check the box “Allow New Sessions”, Click “Update Session Host”. Repeat for all hosts that need to be placed into rotation.<br>
<span class="image"><img src="./media/Enable%20User%20Sessions%202.png" alt="Enable User Sessions 2"></span></p>
</li>
<li>
<p>The current stats of “Allow New Session” is also displayed on the main WVD page for each host line item.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="default-app-group">Default app group</h3>
<div class="paragraph">
<p>Note that the Desktop Application Group is created by default as part of the host pool creation process. This group provides interactive desktop access to all group members.<br>
.To add members to the group:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the name of the App Group<br>
<span class="image"><img src="./media/Default%20App%20Group%201.png" alt="Default App Group 1"></span></p>
</li>
<li>
<p>Click on the link that shows the number of Users Added<br>
<span class="image"><img src="./media/Default%20App%20Group%202.png" alt="Default App Group 2"></span></p>
</li>
<li>
<p>Select the users you wish to add to the app group by checking the box next to their name</p>
</li>
<li>
<p>Click the Select Users button</p>
</li>
<li>
<p>Click the Update app group button</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="create-additional-wvd-app-groups">Create additional WVD app group(s)</h3>
<div class="paragraph">
<p>Additional app groups can be added to the host pool. These app groups will publish specific applications from the host pool virtual machines to the App Group users using RemoteApp.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
WVD only allows end users to be assigned to the Desktop App Group type or RemoteApp App Group type but not both in the same host pool, so make sure you segregate your users accordingly. If users need access to a desktop and streaming apps, a 2nd host pool is required to host the app(s).
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">To create a new App Group:</div>
<ol class="arabic">
<li>
<p>Click the Add button in the app groups section header<br>
<span class="image"><img src="./media/Create%20Additional%20WVD%20App%20Group%201.png" alt="Create Additional WVD App Group 1"></span></p>
</li>
<li>
<p>Enter a name and description for the App Group</p>
</li>
<li>
<p>Select users to add to the group by clicking on the Add Users link. Select each user by clicking the check box next to their name, then click the Select Users button<br>
<span class="image"><img src="./media/Create%20Additional%20WVD%20App%20Group%202.png" alt="Create Additional WVD App Group 2"></span></p>
</li>
<li>
<p>Click the Add RemoteApps link to add applications to this App Group. WVD automatically generates the list of possible applications by scanning the list of applications installed on the virtual machine . Select the application by clicking on the check box next to the application name, then click the Select RemoteApps button.<br>
<span class="image"><img src="./media/Create%20Additional%20WVD%20App%20Group%203.png" alt="Create Additional WVD App Group 3"></span></p>
</li>
<li>
<p>Click the Add App Group button to create the App Group</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="end-user-wvd-access">End user WVD access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>End users can access WVD environments using the Web Client or an installed client on a variety of platforms</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Web Client: <a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-web" class="bare">https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-web</a></p>
</li>
<li>
<p>Web Client Login URL: <a href="http://aka.ms/wvdweb" class="bare">http://aka.ms/wvdweb</a></p>
</li>
<li>
<p>Windows Client: <a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-windows-7-and-10" class="bare">https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-windows-7-and-10</a></p>
</li>
<li>
<p>Android Client: <a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-android" class="bare">https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-android</a></p>
</li>
<li>
<p>macOS Client: <a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-macos" class="bare">https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-macos</a></p>
</li>
<li>
<p>iOS Client: <a href="https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-ios" class="bare">https://docs.microsoft.com/en-us/azure/virtual-desktop/connect-ios</a></p>
</li>
<li>
<p>IGEL Thin Client: <a href="https://www.igel.com/igel-solution-family/windows-virtual-desktop/" class="bare">https://www.igel.com/igel-solution-family/windows-virtual-desktop/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Log in using the end user username and password. Note that Remote App and Desktop Connections (RADC), Remote Desktop Connection (mstsc), and the CloudWorksapce Client for Windows application do not currently support the ability to log in to WVD instances.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="monitor-user-logins">Monitor user logins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The host pool detail page will also display a list of active users when they log in to a WVD session.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="admin-connection-options">Admin connection options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>VDS Admins are able to connect to virtual machines in the environment in a variety of ways.</p>
</div>
<div class="sect2">
<h3 id="connect-to-server">Connect to server</h3>
<div class="paragraph">
<p>Throughout the portal, VDS Admins will find the “Connect to Server” option. By default, this function connects the admin to the virtual machine by dynamically generating local admin credentials and injecting them into a web client connection. The Admin does not need to know (and is never provided with) credentials in order to connect.</p>
</div>
<div class="paragraph">
<p>This default behavior can be disabled on a per-Admin basis as described in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="techlevel-3-admin-accounts">.tech/Level 3 admin accounts</h3>
<div class="paragraph">
<p>In the CWA Setup process there is a “Level III” admin account created. The user name is formatted as <a href="mailto:username.tech@domain.xyz">username.tech@domain.xyz</a></p>
</div>
<div class="paragraph">
<p>These accounts, commonly called a “.tech” account, are named domain-level administrator accounts. VDS Admins can use their .tech account when connecting to a CWMGR1 (platform) server and optionally when connecting to all other virtual machines in the environment.</p>
</div>
<div class="paragraph">
<p>To disable the automatic local admin login function and force the Level III account to be used, change this setting. Navigate to VDS &gt; Admins &gt; Admin Name &gt; Check “Tech Account Enabled.” With this box checked, the VDS admin will not be automatically logged into virtual machines as a local admin and rather be prompted to enter their .tech credentials.</p>
</div>
<div class="paragraph">
<p>These credentials, and other relevant credentials, are automatically stored in the <em>Azure Key Vault</em> and can be accessed from within the Azure Management Portal at <a href="https://portal.azure.com/" class="bare">https://portal.azure.com/</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optional-post-deployment-actions">Optional post-deployment actions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="multi-factor-authentication-mfa">Multi-factor authentication (MFA)</h3>
<div class="paragraph">
<p>NetApp VDS includes SMS/Email MFA at no charge. This feature can be used to secure VDS Admin accounts and/or End User accounts.<br>
<a href="Management.User_Administration.multi-factor_authentication.html">MFA Article</a></p>
</div>
</div>
<div class="sect2">
<h3 id="application-entitlement-workflow">Application entitlement workflow</h3>
<div class="paragraph">
<p>VDS provides a mechanism to assign end users access to applications from a pre-defined list of applications called the Application Catalog. The Application catalog spans all managed deployments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The automatically deployed TSD1 server must remain as-is to support application entitlement. Specifically, do not run the “convert to data” function against this virtual machine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Application Management is detailed in this Article: <a href="Management.Applications.application_entitlement_workflow.html" class="bare">Management.Applications.application_entitlement_workflow.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="azure-ad-security-groups">Azure AD security groups</h3>
<div class="paragraph">
<p>VDS includes functionality to create, populate and delete user groups which are backed by Azure AD Security Groups. These groups can be used outside of VDS just like any other Security Group. In VDS these groups can be used to assign folder permissions and application entitlement.</p>
</div>
<div class="sect3">
<h4 id="create-user-groups">Create user groups</h4>
<div class="paragraph">
<p>Creating user groups is performed on the Users &amp; Groups tab within a workspace.</p>
</div>
</div>
<div class="sect3">
<h4 id="assign-folder-permissions-by-group">Assign folder permissions by group</h4>
<div class="paragraph">
<p>Permissions to view and edit folders in the company share can be assigned to users or groups.</p>
</div>
<div class="paragraph">
<p><a href="Management.User_Administration.manage_folders_and_permissions.html" class="bare">Management.User_Administration.manage_folders_and_permissions.html</a></p>
</div>
</div>
<div class="sect3">
<h4 id="assign-applications-by-group">Assign applications by group</h4>
<div class="paragraph">
<p>In addition to assigning applications to users individually, applications can be provisioned to groups.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the Users and Groups Detail.<br>
<span class="image"><img src="./media/Assign%20Applications%20by%20Group%201.png" alt="Assign Applications by Group 1"></span></p>
</li>
<li>
<p>Add a new group or edit an existing group.<br>
<span class="image"><img src="./media/Assign%20Applications%20by%20Group%202.png" alt="Assign Applications by Group 2"></span></p>
</li>
<li>
<p>Assign user(s) and application(s) to the group.<br>
<span class="image"><img src="./media/Assign%20Applications%20by%20Group%203.png" alt="Assign Applications by Group 3"></span></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configure-cost-optimization-options">Configure cost optimization options</h3>
<div class="paragraph">
<p>Workspace management also extends to managing the Azure resources that support the WVD implementation. VDS allows you to configure both Workload Schedules and Live Scaling to turn Azure virtual machines on and off based on end user activities. These features result in matching Azure resource utilization and spending to the actual usage pattern of end users. In addition, if you have configured a proof of concept WVD implementation you can turn the whole Deployment from the VDS interface.</p>
</div>
<div class="sect3">
<h4 id="workload-scheduling">Workload scheduling</h4>
<div class="paragraph">
<p>Workload Scheduling is a feature that allows the Administrator to create a set schedule for the Workspace virtual machines to be on to support end user sessions. When the end of the scheduled time period is reached for a specific day of the week, VDS Stops/Deallocates the virtual machines in Azure so that hourly charges stop.</p>
</div>
<div class="olist arabic">
<div class="title">To enable Workload Scheduling:</div>
<ol class="arabic">
<li>
<p>Log in to VDS at <a href="https://manage.cloudworkspace.com" class="bare">https://manage.cloudworkspace.com</a> using your VDS credentials.</p>
</li>
<li>
<p>Click on the Workspace menu item and then click on the name of the Workspace in the list. <span class="image"><img src="./media/Workload%20Scheduling%201.png" alt="Workload Scheduling 1"></span></p>
</li>
<li>
<p>Click on the Workload Schedule tab. <span class="image"><img src="./media/Workload%20Scheduling%202.png" alt="Workload Scheduling 2"></span></p>
</li>
<li>
<p>Click the Manage link in the Workload Schedule header. <span class="image"><img src="./media/Workload%20Scheduling%203.png" alt="Workload Scheduling 3"></span></p>
</li>
<li>
<p>Choose a default state from the Status drop down: Always On (default), Always Off, or Scheduled.</p>
</li>
<li>
<p>If you choose Scheduled, the Scheduling options include:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run at Assigned Interval every day. This option sets the schedule to be the same Start Time and End Time for all seven days of the week. <span class="image"><img src="./media/Workload%20Scheduling%204.png" alt="Workload Scheduling 4"></span></p>
</li>
<li>
<p>Run at Assigned Interval for Specified Days. This option sets the schedule to the same Start Tie and End Time only for selected days of the week. Non-selected days of the week will cause VDS to not turn the virtual machines on for those days. <span class="image"><img src="./media/Workload%20Scheduling%205.png" alt="Workload Scheduling 5"></span></p>
</li>
<li>
<p>Run at variable time intervals and days. This option sets the schedule to different Start Times and End Times for each selected day. <span class="image"><img src="./media/Workload%20Scheduling%206.png" alt="Workload Scheduling 6"></span></p>
</li>
<li>
<p>Click the Update schedule button when finished setting the schedule. <span class="image"><img src="./media/Workload%20Scheduling%207.png" alt="Workload Scheduling 7"></span></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="live-scaling">Live Scaling</h4>
<div class="paragraph">
<p>Live Scaling automatically turns virtual machines in a shared host pool on and off depending on concurrent user load. As each server fills up, an additional server is turned on so that its ready when the host pool load balancer sends user session requests. For effective use of Live Scaling, choose “Depth First” as the load balancer type.</p>
</div>
<div class="olist arabic">
<div class="title">To enable Live Scaling:</div>
<ol class="arabic">
<li>
<p>Log in to VDS at <a href="https://manage.cloudworkspace.com" class="bare">https://manage.cloudworkspace.com</a> using your VDS credentials.</p>
</li>
<li>
<p>Click on the Workspace menu item and then click on the name of the Workspace in the list. <span class="image"><img src="./media/Live%20Scaling%201.png" alt="Live Scaling 1"></span></p>
</li>
<li>
<p>Click on the Workload Schedule tab. <span class="image"><img src="./media/Live%20Scaling%202.png" alt="Live Scaling 2"></span></p>
</li>
<li>
<p>Click the Enabled radio button in the Live Scaling section. <span class="image"><img src="./media/Live%20Scaling%203.png" alt="Live Scaling 3"></span></p>
</li>
<li>
<p>Click the Max Number of Users Per Server and enter the max number. Depending on virtual machine size, this number is typically between 4 and 20. <span class="image"><img src="./media/Live%20Scaling%204.png" alt="Live Scaling 4"></span></p>
</li>
<li>
<p>OPTIONAL – Click the Extra Powered On Servers Enabled and enter a number of additional servers that you want on for the host pool. This setting activates the specified number of servers in addition to the actively filling server to act as a buffer for large groups of users logging on in the same time window. <span class="image"><img src="./media/Live%20Scaling%205.png" alt="Live Scaling 5"></span></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Live Scaling currently applies to all Shared resource pools. In the near future each pool will have independent Live Scaling options.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="power-down-the-entire-deployment">Power down the entire deployment</h4>
<div class="paragraph">
<p>If you plan to only use your evaluation deployment on a sporadic, non-production basis you can turn off all the virtual machines in the deployment when you are not using them.</p>
</div>
<div class="olist arabic">
<div class="title">To turn the Deployment on or off (i.e. turn off the virtual machines in the deployment), follow these steps:</div>
<ol class="arabic">
<li>
<p>Log in to VDS at <a href="https://manage.cloudworkspace.com" class="bare">https://manage.cloudworkspace.com</a> using your VDS credentials.</p>
</li>
<li>
<p>Click on the Deployments menu item. <span class="image"><img src="./media/Power%20Down%20the%20Entire%20Deployment%201.png" alt="Power Down the Entire Deployment 1"></span><br>
Scroll your cursor over the line for the target Deployment to display the Configuration gear icon. <span class="image"><img src="./media/Power%20Down%20the%20Entire%20Deployment%202.png" alt="Power Down the Entire Deployment 2"></span></p>
</li>
<li>
<p>Click on the gear, then choose Stop. <span class="image"><img src="./media/Power%20Down%20the%20Entire%20Deployment%203.png" alt="Power Down the Entire Deployment 3"></span></p>
</li>
<li>
<p>To restart or Start, follow steps 1-3 and then choose Start. <span class="image"><img src="./media/Power%20Down%20the%20Entire%20Deployment%204.png" alt="Power Down the Entire Deployment 4"></span></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It may take several minutes for all the virtual machines in the deployment to stop or start.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-and-manage-vm-images">Create and manage VM images</h3>
<div class="paragraph">
<p>VDS contains functionality for creating and managing virtual machine images for future deployments. To reach this functionality, navigate to: VDS &gt; Deployments &gt; Deployment Name &gt; Provisioning Collections. The “VDI Image Collection” features are documented here: <a href="https://flightschool.cloudjumper.com/cwms/provisioning-collections/" class="bare">https://flightschool.cloudjumper.com/cwms/provisioning-collections/</a></p>
</div>
</div>
<div class="sect2">
<h3 id="configure-azure-cloud-backup-service">Configure Azure cloud backup service</h3>
<div class="paragraph">
<p>VDS can natively configure and manage Azure Cloud Backup, an Azure PaaS service for backing up virtual machines. Backup Policies can be assigned to individual machines or groups of machine by type or host pool. Details are found here: <a href="Management.System_Administration.configure_backup.html" class="bare">Management.System_Administration.configure_backup.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="select-app-managementpolicy-mode">Select app management/policy mode</h3>
<div class="paragraph">
<p>By default, VDS implements a number of Group Policy Objects (GPO) that lock down the end user workspace. These policies prevent access to both core data layer locations (ex: c:\) and the ability to perform application installations as an end user.</p>
</div>
<div class="paragraph">
<p>This evaluation is intended to demonstrate the capabilities of Window Virtual Desktop, so you have the option to remove the GPOs so that you can implement a “basic workspace” that provides the same functionality and access as a physical workspace. To do this, follow the steps in the “Basic Workspace” option.</p>
</div>
<div class="paragraph">
<p>You can also choose to utilize the full Virtual Desktop management feature set to implement a “Controlled Workspace”. These steps include creating and managing an application catalog for end user application entitlement and using Administrator level permissions to manage access to both applications and data folders. Follow the steps in the “Controlled Workspace” section to implement this type of workspace on your WVD host pools.</p>
</div>
<div class="sect3">
<h4 id="controlled-wvd-workspace-default-policies">Controlled WVD workspace (default policies)</h4>
<div class="paragraph">
<p>Using a controlled workspace is the default mode for VDS deployments. The polices are applied automatically. This mode requires VDS Administrators to install applications and then end users are granted access to the application via a shortcut on the session desktop. In a similar fashion, access to the data folders are assigned to end users by creating mapped shared folders and setting up permissions to see only those mapped drive letters instead of the standard boot and/or data drives. To manage this environment, follow the steps below to install applications and provide end user access.</p>
</div>
</div>
<div class="sect3">
<h4 id="reverting-to-basic-wvd-workspace">Reverting to basic WVD workspace</h4>
<div class="paragraph">
<p>Creating a basic workspace requires disabling the default GPO policies that are created by default.</p>
</div>
<div class="olist arabic">
<div class="title">To do this, follow this one-time process:</div>
<ol class="arabic">
<li>
<p>Log in to VDS at <a href="https://manage.cloudworkspace.com" class="bare">https://manage.cloudworkspace.com</a> using your primary admin credentials.</p>
</li>
<li>
<p>Click on the Deployments menu item on the left. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%201.png" alt="Reverting to Basic WVD Workspace 1"></span></p>
</li>
<li>
<p>Click on the name of your Deployment. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%202.png" alt="Reverting to Basic WVD Workspace 2"></span></p>
</li>
<li>
<p>Under the Platform Servers section (mid page on right), scroll to the right of the line for CWMGR1 until the gear appears. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%203.png" alt="Reverting to Basic WVD Workspace 3"></span></p>
</li>
<li>
<p>Click on the gear and choose Connect. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%204.png" alt="Reverting to Basic WVD Workspace 4"></span></p>
</li>
<li>
<p>Enter the “Tech” credentials you created during provisioning to log on to the CWMGR1 server using HTML5 access. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%205.png" alt="Reverting to Basic WVD Workspace 5"></span></p>
</li>
<li>
<p>Click the Start (Windows) menu, choose Windows Administrative Tools. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%206.png" alt="Reverting to Basic WVD Workspace 6"></span></p>
</li>
<li>
<p>Click the Group Policy Management icon. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%207.png" alt="Reverting to Basic WVD Workspace 7"></span></p>
</li>
<li>
<p>Click on the AADDC Users item in the list in the left pane. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%208.png" alt="Reverting to Basic WVD Workspace 8"></span></p>
</li>
<li>
<p>Right click on the “Cloud Workspace Users” policy in the list on the right pane, then deselect the “Link Enabled” option. Click OK to confirm this action. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%209_1.png" alt="Reverting to Basic WVD Workspace 9 1"></span> <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%209_2.png" alt="Reverting to Basic WVD Workspace 9 2"></span></p>
</li>
<li>
<p>Select Action, Group Policy Update from the menu, then confirm that you want to force a policy update on those computers. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%2010.png" alt="Reverting to Basic WVD Workspace 10"></span></p>
</li>
<li>
<p>Repeat steps 9 and 10 but select “AADDC Users” and “Cloud Workspace Companies” as the policy to disable the Link. You do not need to force a Group Policy update after this step. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%2011_1.png" alt="Reverting to Basic WVD Workspace 11 1"></span> <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%2011_2.png" alt="Reverting to Basic WVD Workspace 11 2"></span></p>
</li>
<li>
<p>Close the Group Policy Management editor and Administrative Tools windows, then Log Off. <span class="image"><img src="./media/Reverting%20to%20Basic%20WVD%20Workspace%2012.png" alt="Reverting to Basic WVD Workspace 12"></span><br>
These steps will provide a basic workspace environment for end users. To confirm, log in as one of your end user accounts – the session environment should not have any of the Controlled Workspace restrictions like hidden Start menu, locked down access to the C:\ drive, and hidden Control Panel.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The .tech account that was created during deployment has full access to install applications and change security on folders independent of VDS. However, if you want end users from the Azure AD domain to have similar full access, you should add them to the Local Administrators group on each virtual machine.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/virtual-desktop-service/blob/master/sub.Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6_DRAFT.adoc" class="btn btn-default githubEditButton" role="button"><img src="/virtual-desktop-service/images/github.png" class="github-icon" />Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/virtual-desktop-service/issues/new?body=Page%3A%20[WVD Deployment Guide v6](https://docs.netapp.com/us-en/virtual-desktop-service/Deploying.Azure.WVD.Deploying_WVD_in_Azure_v6.html)" class="btn btn-default githubEditButton" role="button"><img src="/virtual-desktop-service/images/github.png" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2020 NetApp</a>
            </li>
            <li class="n-footer__language">
              <!-- <a class="n-footer__corp-link modaal" href="#n-language-selector-menu" data-modaal-scope="modaal_154143812867626e487b1a03c9"> -->
              <a class="n-footer__corp-link modaal" href="#n-language-selector-menu">
                <svg class="n-icon-baseline-language" aria-labelledby="title">
                  <title>netapp-globe</title>
                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#globe"></use>
                </svg>
                English
              </a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/virtual-desktop-service/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/virtual-desktop-service/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/virtual-desktop-service/js/prism.js'></script>
      <script type="text/javascript" src='/virtual-desktop-service/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/virtual-desktop-service/js/www-ntap.js'></script>
  </body>

  
</html>
